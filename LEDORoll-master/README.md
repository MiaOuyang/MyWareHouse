# 1 SPI简介
**SPI（Serial Peripheral interface）是串行外围设备接口**，SPI 接口主要应用在 EEPROM，FLASH，实时时钟，AD 转换器，还有数字信号处理器和数字信号解码器之间。

SPI是一种高速的，全双工，同步的通信总线，并且在芯片的管脚上只占用四根线，节约了芯片的管脚，同时为 PCB 的布局上节省空间，提供方便，正是出于这种简单易用的特性，现在越来越多的芯片集成了这种通信协议，STM32 也有 SPI 接口。

![在这里插入图片描述](https://img-blog.csdnimg.cn/9347eccb7f774dc9a6b63af617b2be93.png)
通常SPI通过4个引脚与外部器件相连：
- MISO：主设备输入/从设备输出引脚。该引脚在从模式下发送数据，在主模式下接收数据。
- MOSI：主设备输出/从设备输入引脚。该引脚在主模式下发送数据，在从模式下接收数据。
- SCK：串口时钟，作为主设备的输出，从设备的输入
- NSS：从设备选择。这是一个可选的引脚，用来选择主/从设备。它的功能是用来作为“片
选引脚”，让主设备可以单独地与特定从设备通讯，避免数据线上的冲突。从设备的NSS
引脚可以由主设备的一个标准I/O引脚来驱动。一旦被使能(SSOE位)，NSS引脚也可以作为
输出引脚，并在SPI处于主模式时拉低；此时，所有的SPI设备，如果它们的NSS引脚连接
到主设备的NSS引脚，则会检测到低电平，如果它们被设置为NSS硬件模式，就会自动进
入从设备状态。当配置为主设备、NSS配置为输入引脚(MSTR=1，SSOE=0)时，如果NSS
被拉低，则这个SPI设备进入主模式失败状态：即MSTR位被自动清除，此设备进入从模式

![在这里插入图片描述](https://img-blog.csdnimg.cn/198d4a99565945e88a793551efe7675f.png)

**SPI 主要特点有**：可以同时发出和接收串行数据；可以当作主机或从机工作；提供频率可编程时钟；发送结束中断标志；写冲突保护；总线竞争保护等。

**SPI总线传输过程** 
主机先将NSS信号拉低，这样保证开始接收数据；

- 当**接收端**检测到**时钟的边沿信号**时，它将立即读取数据线上的信号，这样就得到了一位数据（1bit）;

- **主机**发送到**从机**时：主机产生相应的时钟信号，然后数据一位一位地将从MOSI信号线上进行发送到从机；

- **主机**接收**从机**数据：如果从机需要将数据发送回主机，则主机将继续生成预定数量的时钟信号，并且从机会将数据通过MISO信号线发送；

具体框图如下：

![在这里插入图片描述](https://img-blog.csdnimg.cn/7eb5e961238b4e7ebe6f7d6857b2795f.png)
# 2 OLED简介
**OLED（Organic Light-Emitting Diode）**，又称为有机电激光显示、有机发光半导体（Organic Electroluminescence Display，OLED）。OLED属于一种电流型的有机发光器件，是通过载流子的注入和复合而致发光的现象，发光强度与注入的电流成正比。OLED在电场的作用下，阳极产生的空穴和阴极产生的电子就会发生移动，分别向空穴传输层和电子传输层注入，迁移到发光层。当二者在发光层相遇时，产生能量激子，从而激发发光分子最终产生可见光。

![在这里插入图片描述](https://img-blog.csdnimg.cn/87ebcbc935b44b95bc3ac7835d3acbb7.png)

**接口定义**

1、本模块支持IIC、3线制SPI以及4线制SPI接口总线模式切换（如图2红框内所示），具体说明如下：
A、使用4.7K电阻只焊接**R3、R4**，则选择**4线制SPI**总线接口（默认）；
B、使用4.7K电阻只焊接**R2、R3**，则选择**3线制SPI**总线接口；
C、**使用4.7K电阻只焊接**R1、R4、R6、R7、R8，则选择**IIC总线**接口；
2、接口总线模式切换后，需要选择相应配套的软件和相应的接线引脚（如图1所示），模块才能正常运行。相应的接线引脚说明如下：
A、选择**4线制SPI**总线接口，**所有**的引脚都需要使用；
B、选择**3线制SPI**总线接口，只有**DC引脚不需要使用（可以不接）**，其他引脚都需要使用；
C、选择**IIC总线**接口，**只需要使用GND、VCC、D0、D1这四个引脚**，同时将RES接高电平（可以接VCC），DC和CS接电源地；

**引脚说明**

![在这里插入图片描述](https://img-blog.csdnimg.cn/1b7e6aae7a114ef28774718570ad3ec2.png)

0.96寸OLED显示屏相关介绍可参考链接：
[0.96inch SPI OLED Module](http://www.lcdwiki.com/zh/0.96inch_SPI_OLED_Module)
